import sys
import requests

if len(sys.argv) < 2:
    print("Usage: python script.py <url>")
    sys.exit(1)

url = sys.argv[1]

response = requests.get("http://192.168.88.114:9095/platform/login?userName=default&password=123456")

token = response.json()["data"]["token"]


params = {
    "currentPage": "1",
    "pageSize": "12"
}

headers = {
    "X-Access-Token": token
}

response = requests.get(url + "/dashboardUser", params=params, headers=headers)

if response.status_code == 200:
    response_data = response.json()
    dataList = response_data["data"]["dataList"]
    
    print("dataList:")
    for entry in dataList:
        print(entry)
else:
    print(f"Request failed with status code: {response.status_code}")
